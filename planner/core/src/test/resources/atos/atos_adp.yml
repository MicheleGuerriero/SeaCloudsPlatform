tosca_definitions_version: tosca_simple_yaml_1_0_0_wd03
description: Sample 3-tier application
imports:
- tosca-normative-types:1.0.0.wd06-SNAPSHOT
topology_template:
  node_templates:
    www:
      type: sc_req.www
      properties:
        language: JAVA
      requirements:
      - host: Amazon_EC2_m4_large_eu_west_1
        instancesPOC: 2
    webservices:
      type: sc_req.webservices
      properties:
        language: JAVA
        location: ''
        java_version:
          constraints:
          - greater_or_equal: '7'
          - less_or_equal: '8'
      requirements:
      - host: Amazon_EC2_c1_xlarge_eu_central_1
        instancesPOC: 2
    db1:
      type: sc_req.db1
      properties:
        mysql_version:
          constraints:
          - greater_or_equal: '5.0'
          - less_or_equal: '5.6'
      requirements:
      - host: Amazon_EC2_t2_micro_us_east_1
        instancesPOC: 4
    Amazon_EC2_c1_xlarge_eu_central_1:
      type: seaclouds.nodes.Compute.Amazon_EC2
      properties:
        num_cpus: 8
        country: Germany
        cost: 0.68
        city: FRANKFURT
        resource_type: compute
        disk_size: 1680
        availability: 0.9995
        hardwareId: c1.xlarge
        disk_type: sata
        location: aws-ec2
        num_disks: 4
        region: eu-central-1
        ram: 7
        performance: 37
    Amazon_EC2_m4_large_eu_west_1:
      type: seaclouds.nodes.Compute.Amazon_EC2
      properties:
        num_cpus: 2
        country: Ireland
        performance: 47
        cost: 0.17
        hardwareId: m4.large
        city: DUBLIN
        resource_type: compute
        location: aws-ec2
        availability: 0.9995
        region: eu-west-1
        ram: 8
    Amazon_EC2_t2_micro_us_east_1:
      type: seaclouds.nodes.Compute.Amazon_EC2
      properties:
        num_cpus: 1
        country: United States
        performance: 40
        cost: 0.018
        hardwareId: t2.micro
        city: ASHBURN
        resource_type: compute
        location: aws-ec2
        availability: 0.9995
        region: us-east-1
        ram: 1
node_types:
  sc_req.www:
    derived_from: seaclouds.nodes.webapp.tomcat.TomcatServer
    properties:
      java_support:
        constraints:
        - equal: true
      tomcat_support:
        constraints:
        - equal: true
      java_version:
        constraints:
        - greater_or_equal: '7'
        - less_or_equal: '8'
      resource_type:
        constraints:
        - equal: compute
  sc_req.webservices:
    derived_from: seaclouds.nodes.SoftwareComponent
    properties:
      num_cpus:
        constraints:
        - greater_or_equal: '4'
      disk_size:
        constraints:
        - greater_or_equal: '256'
      resource_type:
        constraints:
        - equal: compute
  sc_req.db1:
    derived_from: seaclouds.nodes.database.mysql.MySqlNode
    properties:
      mysql_support:
        constraints:
        - equal: true
      mysql_version:
        constraints:
        - greater_or_equal: '5.0'
        - less_or_equal: '5.6'
      resource_type:
        constraints:
        - equal: compute
  seaclouds.nodes.Compute:
    derived_from: tosca.nodes.Compute
    description: Custom compute
    properties:
      hardwareId:
        required: false
        type: string
groups:
  operation_www:
    members:
    - www
    policies:
    - QoSInfo:
        execution_time: 200 ms
        benchmark_platform: hp_cloud_services.2xl
    - dependencies:
        operation_webservices: '2'
    - AppQoSRequirements:
        response_time:
          less_than: 2000.0 ms
        availability:
          greater_than: 0.98
        cost:
          less_or_equal: 200.0 euros_per_month
        workload:
          less_or_equal: 50.0 req_per_min
    - QoSRequirements:
        AverageThroughput:
          less_than: 10.0 req_per_min
        AverageResponseTime:
          less_than: 5000.0 ms
    - ExpectedQualityPOC:
        expectedAvailabilityPOC: 0.9999994999999999
        fitnessPOC: 0.7189198227572945
        expectedCostPOC: 1275.8400000000001
  operation_webservices:
    members:
    - webservices
    policies:
    - QoSInfo:
        execution_time: 100 ms
        benchmark_platform: hp_cloud_services.2xl
    - dependencies:
        operation_db1: '1'
  operation_db1:
    members:
    - db1
    policies:
    - dependencies: {}
